<!DOCTYPE html>
<html lang="en">

<head>
    <!-- #region Sabio Code - You can Fold this region to remove it from sight -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="referrer" content="unsafe-url" />
    <meta name="description" content="Sabio Coding Bootcamp" />
    <meta itemprop="image" content="https://sabio.la/Sabio.png" />
    <link rel="shortcut icon" href="https://sabio.la/Sabio.png" />
    <link rel="icon" type="image/png" href="https://sabio.la/Sabio.png" />
    <!-- Do Not Change the HTML title or anything between this line and the line with the ðŸ’˜'s -->
    <title>Starter Tasks Index</title>
    <link href="https://pw.sabio.la/dist/all-site.css" rel="stylesheet" />
    <script src="https://pw.sabio.la/api/js/site"></script>
    <script src="https://unpkg.com/axios@0.19.2/dist/axios.min.js"></script>
    <script src="friendsService.js"></script>
    <script src="eventsService.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.css" rel='stylesheet'>
    <!-- #endregion -->
    <!-- I ðŸ’˜ Code, You ðŸ’˜ Code, We all ðŸ’˜ Code -->

    <!-- ðŸ’¡ All your CSS in here -->
    <style></style>
</head>

<body class="sabio" data-ins="pw-00">
    <!-- Do Not Edit or Remove this nav element -->
    <!-- <nav class="do-not-remove navbar navbar-expand-md navbar-dark bg-dark sabio"></nav> -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand text-info" href="/index.html">Sabio Starter Tasks</a>

        <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
            <div class="navbar-nav">
                <a class="nav-item nav-link text-info" href="/index.html">Home <span
                        class="sr-only">(current)</span></a>
                <a class="nav-item nav-link text-info" href="/friends.html">Friends</a>
                <a class="nav-item nav-link text-info" href="#">Blogs</a>
                <a class="nav-item nav-link text-info" href="/tech.html">Tech Companies</a>
                <a class="nav-item nav-link text-info" href="/jobs.html">Jobs</a>
                <a class="nav-item nav-link text-info" href="/events.html">Events</a>
                <a class="nav-item nav-link text-info" href="/register.html">Register</a>
                <a class="nav-item nav-link text-info" href="/login.html">Login</a>
                <b><a class="nav-item nav-link disabled text-danger" id='username' href="#">Username</a></b>
                <button type="button" class="btn btn-info user-true" id='logout'>Log Out</button>


            </div>
        </div>
    </nav>

    <div class="container workspace">
        <div class="mb-3">
            <label for="formFile" class="form-label">Default file input example</label>
            <input class="form-control" type="file" id="formFile">
            <button type="button" class="btn btn-warning upload">Upload</button>
        </div>
    </div>

    <div class="container ajax sabio d-none"></div>

    <!-- Do Not Edit or Remove this footer element -->
    <!-- <script>
      <footer class="do-not-remove container-fluid footer mx-auto  fb-targert sabio">
        <p class="text-center">Â© Sabio.la 2019</p>
      </footer>;
    </script> -->

    <!--ðŸ‘‡ðŸ» All your JavaScript code goes below here inside this script tag ðŸ‘‡ðŸ» -->
    <script id="candidateCode">
        function startUp() {
            whoCurrentUser()
            wireUpButtons()

        }
        function wireUpButtons() {
            $("#logout").on('click', logoutUser)
            $('.upload').on('click', makeUpload)
        }
        //is there a curent user if so show logged in stuff if not direct user to login
        function whoCurrentUser() {
            friendsService
                .currentUser()
                .then(onCurrentUserSuccess)
                .catch(onCurrentUserFail)
        }

        function onCurrentUserSuccess(response) {
            console.log(response.data)
            let currentUser = response.data.item.name
            $('#username').text(currentUser)
            $('.user-false').addClass('d-none')
            addUserNameToPage(currentUser)
        }

        function addUserNameToPage(name) {
            $('.welcome-message').text(`Welcome to Starter Tasks, ${name}!`)
        }

        function onCurrentUserFail(data) {
            console.log(data)
            $('.user-true').addClass('d-none')
            $('#username').text('Please Login')
        }
        // all the stuff for loging out

        function logoutUser() {
            friendsService
                .logOutUser()
                .then(onLogOutSuccess)
                .catch(onLogOutFail)
        }

        function onLogOutSuccess(data) {
            console.log(data)
            window.location.href = "/login.html"
        }

        function onLogOutFail(data) {
            console.log(data)
        }

        function uploadFiles() {
            newFile = $('#formFile').val()
            console.log(newFile)
            return newFile
        }
        function makeUpload() {
            file = uploadFiles()
            uploadFile(file)
        }

        function uploadFile() {
            eventsService
                .upload()
                .then(onUploadSuccess)
                .catch(onUploadFail)
        }
        function onUploadSuccess(response) {
            console.log(response)
        }

        function onUploadFail(response) {
            console.log(response)
        }



    </script>
    <!-- ðŸ›‘ Do Not Write Any Code Below here -->
</body>

</html>